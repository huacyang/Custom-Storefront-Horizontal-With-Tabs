var adobeDPS=function(){function N(){throw Error("Class object should never be directly constructed");}function Q(a,b){this.lvl=a;this.msg=b;this.timestamp=new Date}function d(){this.enableLogging=!0;this._profileTimers={};this._logList=[]}function A(){if(!(this instanceof A))throw Error("Bridge initialized without new keyword!");var a;this.BRIDGE_PREFIX_URI="bridge://";this.bridgeBusy=!0;this.bridgeMessageQueue=[];this.messageBuffer=[];this.totalSends=this.sendTime=this.sentData=0;this.metrics=[Infinity,
-Infinity,0];this.metricsLogTimeout=null;this.location="adobeDPS._bridge";document.body!==null?(this.bridgeBusy=!1,this.out({event:{type:"BridgeInitialized",bridgeLocation:this.location}}),d.instance.info("BridgeInitialized - LOC: "+this.location)):(a=this,window.addEventListener("DOMContentLoaded",function(){a.handleDomLoaded.call(a)}))}function ga(){if(!(this instanceof ga))throw Error("AndroidBridge initialized without new keyword!");this.location="adobeDPS._bridge";this.out({event:{type:"BridgeInitialized",
bridgeLocation:this.location}});d.instance.info("BridgeInitialized - LOC: "+this.location)}function va(a,b,c,e,d){this._listener=b;this._isOnce=c;this.context=e;this._signal=a;this._priority=d||0}function k(){this._bindings=[];this._prevParams=null}function ha(){if(!(this instanceof ha))throw Error("TransactionError initialized without new keyword!");this.code=0}function i(){if(!(this instanceof i))throw Error("Transaction initialized without new keyword!");this.stateChangedSignal=new k;this.completedSignal=
new k;this.progressSignal=new k;this.id=null;this.progress=this.state=0;this.error=new ha;this.isDeterminate=this.isPausable=this.isCancelable=!1;this.isFailureTerminal=!0}function ia(){i.call(this)}function ja(){i.call(this)}function ba(a,b){this.addedSubscriptions=a;this.removedSubscriptions=b;i.call(this)}function T(a){this.productId=a;i.call(this)}function U(a,b,c){if(!c&&(!a||!b))throw Error("A token or a username and password must be provided for a UserSigninTransaction");this.username=a;this.password=
b;this.token=c;i.call(this)}function ka(){i.call(this)}function n(){}function h(){this.newTransactionsAvailableSignal=new k;this._allTransactions={};this._lastUID=null;this._lastUIDCounter=0;this.transactionStates=E;this.transactionErrorTypes=m}function B(){this.updatedSignal=new k;this.id=null;this.currentTransactions=[];this.downloadSize=null;this.state=wa.INVALID;this.title=this.previewImageURL=null;this.isUpdatable=this.isArchivable=this.isViewable=this.isDownloadable=this.isCompatible=!1}function C(){B.call(this);
this.filter=this.broker=this.price=this.description=this.folioDescription=this.publicationDate=this.folioNumber=this.productId=null;this.isThirdPartyEntitled=!1;this.targetDimensions=null;this.supportsContentPreview=this.isPurchasable=!1;this.receipt=null;this.entitlementType=xa.UNKNOWN;this.hasSections=!1;this.contentPreviewState=ya.NOT_REQUESTED;this.sections=new la}function ca(){B.call(this);this.parentFolio=null;this.isAtHeadOfDownloadQueue=!1;this.index=0}function la(){this.addedSignal=new k;
this.removedSignal=new k;this.internal={}}function x(){this.updatedSignal=new k;this.folioMap=new la;this.folioStates=wa;this.folioContentPreviewStates=ya;this.currentTransaction=null}function l(a){this.folio=a;i.call(this);this.completedSignal.add(this._completedHandler,this)}function I(a){l.call(this,a)}function V(a,b,c){this.broker=a;this.productId=b;this.token=c;this.isSubscription=!1}function D(a,b,c,e,d){this.updatedSignal=new k;this.productId=a;this.title=b;this.duration=c;this.price=e;this.isOwned=
d||!1;this.receipt=null}function da(a,b,c,e,d){this.startDate=e;this.endDate=d;V.call(this,a,b,c);this.isSubscription=!0}function ea(){this.orientation=this.type=this.buttonTitle=this.label=this.buttonDisabledImage=this.buttonDownImage=this.buttonUpImage=this.buttonImage=null}function W(a){l.call(this,a)}function ma(a){l.call(this,a)}function R(a){l.call(this,a);this.step=0;this.isDeterminate=this.isCancelable=this.isPausable=!0;this.isFailureTerminal=!1}function X(a,b,c,e){this.isPortrait=b;this.width=
c;this.height=e;this.previewImageURL=null;l.call(this,a)}function na(a){l.call(this,a)}function oa(a){l.call(this,a)}function fa(a){l.call(this,a);this.step=0;this.isDeterminate=this.isCancelable=this.isPausable=!0;this.isFailureTerminal=!1}function Y(a){R.call(this,a)}function pa(a){l.call(this,a)}function Z(a){if(!a||a=="")throw Error("A non-empty productId has to be provided to get folio information.");this.productId=a;this.folios=[];i.call(this)}function qa(){this.updatedSignal=new k}function S(){this.isEnabled=
this.isSupported=!1;this.updatedSignal=new k}function $(){this.isEnabled=this.isSupported=!1;this.updatedSignal=new k}function r(){this.variables={}}function J(){this.updatedSignal=new k;this.userAuthenticationChangedSignal=new k;this.currentTransaction=null;this.isUserAuthenticated=!1;this.token=this.userName=null}function K(){this.applicationStates={};this.applicationStateTypes=ra;this.adobeApplicationVersion=this.applicationVersion=this.applicationID=null;this.callbacks={};this.applicationContext=
null;this.applicationContextUpdatedSignal=new k}function y(){this.updatedSignal=new k;this.isCustomWebviewDisplaying=this.isWelcomeScreenDisplaying=this.isCustomDialogDisplaying=!1}function O(){this.updatedSignal=new k;this.deviceName=this.os=this.deviceId=null;this.isOnline=this.isPurchasingEnabled=!1;this.networkType=null;this.networkTypes=Ca;this.advertisingIdentifier=this.identifierForVendor=this.omnitureVisitorId=this.pushNotificationToken=null;this.isAdvertisingTrackingEnabled=!1;this.backgroundRefreshState=
null;this.backgroundRefreshStates=Da;this.callbacks={}}function t(){this.newReceiptsAvailableSignal=new k;this.updatedSignal=new k;this.receipts={};this.subscriptionReceipts={};this.availableSubscriptions={};this.subscriptionsAddedSignal=new k;this.subscriptionsRemovedSignal=new k;this.entitlementTypes=xa;this.activeSubscription=null}function P(){this.autoArchive=S.instance;this.analytics=$.instance}function Ea(a,b,c,e,d,f,h){this.latitude=a;this.longitude=b;this.accuracy=e;this.altitude=c!==void 0?
c:null;this.heading=d!==void 0?d:null;this.speed=f!==void 0?f:null;if(this.speed===0||this.speed===null)this.heading=NaN;this.altitudeAccuracy=h!==void 0?h:null}function aa(a,b){this.code=a||null;this.message=b||""}function Fa(){this.enableHighAccuracy=!1;this.timeout=this.maximumAge=-1}function Ga(a,b){return setTimeout(function(){var b=L.instance.callbacks[a];clearTimeout(b.timeout.timer);b.timeout.timer=null;b.fail&&b.fail({code:aa.TIMEOUT,message:"Position retrieval timed out."})},b)}function L(){this.callbacks=
{};this.lastPosition=null}function v(){this.callbacks={}}function w(a){return!(a===void 0||a===null)}function j(a){return w(a)&&typeof a==="function"}function z(a,b){if(!j(a))throw Error(b);}function sa(a){return w(a)&&typeof a==="string"&&a.length>0&&a.length<65&&a.search("['\"\\\n\r\t\u0008\u000c]+")===-1}function Ha(a,b){if(!w(a))return!1;if(!a.hasOwnProperty("eventsFilter")||!a.hasOwnProperty("enableRecordingStatusUI"))return!1;if(typeof a.enableRecordingStatusUI!=="boolean")return!1;var c=a.eventsFilter,
e;for(e in c)if(c.hasOwnProperty(e)&&(typeof c[e]!=="string"||b.indexOf(c[e])===-1))return!1;return!0}function G(a,b){j(a)&&a(b)}function F(){this.recordings=this.currentRecordingId=this.supportedEventAttributes=this.supportedEventNames=null;this.stateChangedSignal=new k;this.FolioActivityRecordingStates=Ia;this.FolioActivityErrorCodes=M;this.callbackId=Math.floor(Math.random()*2E9);this.callbacks={}}function j(a){return o(a)&&typeof a==="function"}function o(a){return!(a===void 0||a===null)}function H(){this.oauthData=
this.redirectURI=this.clientId=null;this.OAuthRedirectServiceErrorCodes=p;this.timer=this.responseHandler=this.callback=null;this.timeout=12E4;this.callbackId=Math.floor(Math.random()*2E9)}function w(a){return!(a===void 0||a===null)}function j(a){return w(a)&&typeof a==="function"}function za(a){return w(a)&&typeof a=="string"&&a.length<65}function ta(a){return w(a)&&typeof a==="string"&&a.length>0&&a.length<65&&a.search(Ja)===-1}function z(a,b){if(!j(a))throw Error(b);}function G(a,b){j(a)&&a(b)}
function Aa(a,b){a.isOpen=b.isOpen;a.hasSecurePasswordStorage=b.hasSecurePasswordStorage;a.retainPassword=b.retainPassword;a.isPasswordAvailable=b.isPasswordAvailable;a.closeOnBackgrounding=b.closeOnBackgrounding}function u(){this.isOpen=!1;this.hasSecurePasswordStorage=!0;this.closeOnBackgrounding=this.isPasswordAvailable=this.retainPassword=!1;this.stateChangedSignal=new k;this.encryptedStorageErrorCodes=q;this.callbackId=Math.floor(Math.random()*2E9);this.callbacks={}}function f(){try{d.instance.enableLogging=
!0,d.instance.debug("Interface initialized"),this.version=1.4,this.uid=this._generateUID(),this.initializationComplete=new k,this.initializationComplete.memorize=!0,this._bridge=A.instance,this.libraryService=x.instance,this.transactionManager=h.instance,this.authenticationService=J.instance,this.deviceService=O.instance,this.receiptService=t.instance,this.settingsService=P.instance,this.analyticsService=r.instance,this.configurationService=K.instance,this.dialogService=y.instance,this.geolocation=
null,this.calendarService=v.instance,this.encryptedStorageService=this.folioActivityService=this.oauthRedirectService=null,this.log=d.instance,this._bridge.out({event:{type:"LibraryAPIReady",version:this.version,id:this.uid}}),d.instance.info("LibraryAPIReady - V: "+this.version+", ID: "+this.uid)}catch(a){d.instance.error(a)}}N.prototype.toString=function(){var a=/(\w+)\(/.exec(this.constructor.toString())[1];this.hasOwnProperty("id")&&(a+="["+this.id+"]");return a};N.extend=function(a){var b,c;
b=this.prototype;c=function(){};c.prototype=b;b=new c;a.prototype=b;a.prototype.constructor=a;a.extend=N.extend};d.prototype.error=function(a){if(this.enableLogging){var b=!1;try{a?this._logList.push(new Q(this.logLevels.ERROR,a.message+"\n"+printStackTrace({e:a}).join("\n"))):this._logList.push(new Q(this.logLevels.ERROR,a.message+"\n"+printStackTrace().join("\n"))),b=!0}catch(c){}finally{b||this._logList.push(new Q(this.logLevels.ERROR,a.message))}}};d.prototype.warn=function(a){this.enableLogging&&
this._logList.push(new Q(this.logLevels.WARN,a))};d.prototype.info=function(a){this.enableLogging&&this._logList.push(new Q(this.logLevels.INFO,a))};d.prototype.debug=function(a){this.enableLogging&&this._logList.push(new Q(this.logLevels.DEBUG,a))};d.prototype.profile=function(a){if(this.enableLogging){var b;this._profileTimers.hasOwnProperty(a)?(b=Date.now()-this._profileTimers[a],this._logList.push(new Q(this.logLevels.PROFILE,a+": "+b+"ms"))):this._profileTimers[a]=Date.now()}};d.prototype.bridge=
function(a){this.enableLogging&&this._logList.push(new Q(this.logLevels.BRIDGE,a))};d.prototype.print=function(a,b){if(this.enableLogging){var c,e,d="";for(c=0;c<this._logList.length;c++)e=this._logList[c],a&e.lvl&&(d+=this._lvlToStr(e.lvl),d+=b?" ["+e.timestamp.getTime()+"] ":" - ",d+=e.msg+"\n");return d}else return""};d.prototype.clear=function(){if(this.enableLogging)this._logList.length=0};d.prototype._lvlToStr=function(a){switch(a){case this.logLevels.BRIDGE:return"BRIDGE";case this.logLevels.DEBUG:return"DEBUG";
case this.logLevels.PROFILE:return"PROFILE";case this.logLevels.INFO:return"INFO";case this.logLevels.WARN:return"WARN";case this.logLevels.ERROR:return"ERROR";default:return"LOG"}};d.instance=new d;d.prototype.logLevels={BRIDGE:1,DEBUG:2,PROFILE:4,INFO:8,WARN:16,ERROR:32};N.extend(A);A.prototype.handleDomLoaded=function(){this.bridgeBusy=!1;this.out({event:{type:"BridgeInitialized",bridgeLocation:this.location}});d.instance.info("BridgeInitialized - LOC: "+this.location)};A.prototype.out=function(a,
b){var c,e;if(window.boolAdobeDPSWebViewer!==!0)if(!this.bridgeBusy||b){this.bridgeBusy=!0;if(a instanceof Array){e="[";for(c=0;c<a.length;c++)e+=JSON.stringify(a[c])+(c<a.length-1?",":"");e+="]"}else e=JSON.stringify(a);this.sentData=e.length;this.sendTime=(new Date).getTime();this.totalSends++;window.location=this.BRIDGE_PREFIX_URI+encodeURIComponent(e);d.instance.bridge("OUT - "+e)}else this.bridgeMessageQueue.push(a)};A.prototype.partialInput=function(a,b,c,e){var g="";try{if(e===!0){if(this.messageBuffer[a]&&
this.messageBuffer[a].length){for(e=0;e<b;++e)g+=this.messageBuffer[a][e];d.instance.bridge("EXECUTE ("+a+" [ "+b.toString()+" ]) - "+c);this.input(JSON.parse(g),c);this.messageBuffer[a].length=0}}else this.messageBuffer[a]||(this.messageBuffer[a]=[]),d.instance.bridge("APPEND ("+a+" [ "+b.toString()+" ]) - "+c.length.toString()),this.messageBuffer[a][b]=c}catch(f){d.instance.error(f)}};A.prototype.input=function(a,b){if(window.boolAdobeDPSWebViewer!==!0)try{switch(d.instance.bridge("INPUT("+b+") - "+
JSON.stringify(a)),b){case "_initialize":f.instance._initialize(a);break;case "_update":f.instance._update(a);break;default:d.instance.warn("Bridge.input received call for unknown endpoint: "+b)}}catch(c){d.instance.error(c)}};A.prototype.notifyReceivedBridgeData=function(){this.bridgeBusy=!1;this.updateMetrics();this.processQueue()};A.prototype.updateMetrics=function(){var a;a=this.sentData/1024/(((new Date).getTime()-this.sendTime)/1E3);this.metrics[0]>a&&(this.metrics[0]=a);this.metrics[1]<a&&
(this.metrics[1]=a);this.metrics[2]=(this.metrics[2]*(this.totalSends-1)+a)/this.totalSends;this.logMetrics()};A.prototype.logMetrics=function(){this.metricsLogTimeout&&clearTimeout(this.metricsLogTimeout);var a=this;this.metricsLogTimeout=setTimeout(function(){a.totalSends=1;d.instance.info("Bridge BW - Min: "+a.metrics[0].toFixed(2)+"KB/s, Max: "+a.metrics[1].toFixed(2)+"KB/s, Avg: "+a.metrics[2].toFixed(2)+"KB/s")},1E3)};A.prototype.processQueue=function(){if(this.bridgeMessageQueue.length>0)this.out(this.bridgeMessageQueue),
this.bridgeMessageQueue.length=0};A.extend(ga);ga.prototype.out=function(a){var b,c;if(window.boolAdobeDPSWebViewer!==!0){if(a instanceof Array){c="[";for(b=0;b<a.length;b++)c+=JSON.stringify(a[b])+(b<a.length-1?",":"");c+="]"}else c=JSON.stringify(a);_adobedps_native_bridge.out(c);d.instance.bridge("OUT - "+c)}};typeof _adobedps_native_bridge!=="undefined"?(d.instance.info("Using Android Bridge"),A.instance=new ga):(d.instance.info("Using Location Bridge"),A.instance=new A);d.instance.profile("InitializationTime");
va.prototype={active:!0,params:null,execute:function(a){var b;this.active&&this._listener&&(a=this.params?this.params.concat(a):a,b=this._listener.apply(this.context!==void 0?this.context:window,a),this._isOnce&&this.detach());return b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},getListener:function(){return this._listener},_destroy:function(){delete this._signal;delete this._listener;delete this.context},
isOnce:function(){return this._isOnce},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}};k.validateListener=function(a,b){if(typeof a!=="function")throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b));};k.prototype={memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(a,b,c,e){var d=this._indexOfListener(a,c);if(d!==-1){if(a=this._bindings[d],a.isOnce()!==b)throw Error("You cannot add"+
(b?"":"Once")+"() then add"+(!b?"":"Once")+"() the same listener without removing the relationship first.");}else a=new va(this,a,b,c,e),this._addBinding(a);this.memorize&&this._prevParams&&a.execute(this._prevParams);return a},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c=this._bindings.length,e;c--;)if(e=this._bindings[c],e._listener===a&&e.context===
b)return c;return-1},has:function(a,b){return this._indexOfListener(a,b)!==-1},add:function(a,b,c){k.validateListener(a,"add");return this._registerListener(a,!1,b,c)},addOnce:function(a,b,c){k.validateListener(a,"addOnce");return this._registerListener(a,!0,b,c)},remove:function(a,b){k.validateListener(a,"remove");var c=this._indexOfListener(a,b);c!==-1&&(this._bindings[c]._destroy(),this._bindings.splice(c,1));return a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();
this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(a){if(this.active){var b=Array.prototype.slice.call(arguments),c=this._bindings.length,e;if(this.memorize)this._prevParams=b;if(c){e=this._bindings.slice();this._shouldPropagate=!0;do c--;while(e[c]&&this._shouldPropagate&&e[c].execute(b)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams},
toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var m={TransactionCannotConnectToInternetError:-100,TransactionCannotConnectToServerError:-110,TransactionAuthenticationUnrecognizedCredentialsError:-150,TransactionFolioPurchasingDisabledError:-200,TransactionFolioCannotPurchaseError:-210,TransactionSubscriptionCannotPurchaseError:-220,TransactionSubscriptionResolveError:-225,TransactionRestorePurchasesError:-250,TransactionQuotaExceededError:-300,
TransactionFolioIncompatibleError:-400,TransactionFolioNotEnoughDiskSpaceError:-500,TransactionFolioCannotDownloadError:-510,TransactionFolioFileMissingOrInvalid:-520,TransactionFolioCannotInstallItemError:-530,TransactionFolioNoPreviewAvailable:-540,TransactionFolioNotFoundOnServer:-550,TransactionFolioCallNotApplicable:-560,TransactionInternalError:-900,toErrorType:function(a){switch(parseInt(a,10)){case -100:return m.TransactionCannotConnectToInternetError;case -110:return m.TransactionCannotConnectToServerError;
case -150:return m.TransactionAuthenticationUnrecognizedCredentialsError;case -151:return m.TransactionAuthenticationCancelError;case -200:return m.TransactionFolioPurchasingDisabledError;case -210:return m.TransactionFolioCannotPurchaseError;case -211:return m.TransactionFolioPurchaseCancelError;case -220:return m.TransactionSubscriptionCannotPurchaseError;case -221:return m.TransactionSubscriptionPurchaseCancelError;case -225:return m.TransactionSubscriptionResolveError;case -250:return m.TransactionRestorePurchasesError;
case -251:return m.TransactionRestorePurchaseCancelError;case -300:return m.TransactionQuotaExceededError;case -400:return m.TransactionFolioIncompatibleError;case -500:return m.TransactionFolioNotEnoughDiskSpaceError;case -510:return m.TransactionFolioCannotDownloadError;case -520:return m.TransactionFolioFileMissingOrInvalid;case -530:return m.TransactionFolioCannotInstallItemError;case -540:return m.TransactionFolioNoPreviewAvailable;case -550:return m.TransactionFolioNotFoundOnServer;case -560:return m.TransactionFolioCallNotApplicable;
case -900:return m.TransactionInternalError;default:throw Error("Invalid TransactionError: "+a);}}};N.extend(ha);var E={FAILED:-100,CANCELED:-1,INITIALIZED:0,PAUSED:100,ACTIVE:200,FINISHED:400,toState:function(a){switch(parseInt(a,10)){case -100:return E.FAILED;case -1:return E.CANCELED;case 0:return E.INITIALIZED;case 100:return E.PAUSED;case 200:return E.ACTIVE;case 400:return E.FINISHED;default:throw Error("Invalid TransactionState: "+a);}}};N.extend(i);i.prototype.isFolioStateChangingTransaction=
function(){return this instanceof I};i.prototype.start=function(){if(this.state!=E.INITIALIZED)throw Error("Attempting to start an ongoing Transaction! State: "+this.state);else return f.instance._send({action:"call",path:"transactionManager._allTransactions['"+this.id+"']",data:{method:"start"}}),this};i.prototype.pause=function(){if(this.isPausable)f.instance._send({action:"call",path:"transactionManager._allTransactions['"+this.id+"']",data:{method:"pause"}});else throw Error("Attempting to pause a non-pausable Transaction!");
return this};i.prototype.resume=function(){if(this.state!=E.PAUSED)throw Error("Attempting to resume a non-paused Transaction! State: "+this.state);else f.instance._send({action:"call",path:"transactionManager._allTransactions['"+this.id+"']",data:{method:"resume"}});return this};i.prototype.cancel=function(){if(this.isCancelable)f.instance._send({action:"call",path:"transactionManager._allTransactions['"+this.id+"']",data:{method:"cancel"}});else throw Error("Attempting to cancel a non-cancelable Transaction!");
return this};i.prototype._isSuspendable=function(){return!1};i.prototype._suspend=function(){if(this._isSuspendable())f.instance._send({action:"call",path:"transactionManager._allTransactions['"+this.id+"']",data:{method:"suspend"}});else throw Error("Attempting to suspend a non-suspendable Transaction!");return this};i.prototype.jsonClassName="Transaction";i.prototype._toJSON=function(){return{type:this.jsonClassName,id:this.id}};i.prototype._updateFromJSON=function(a){var b;if(this.id===null&&a.hasOwnProperty("id"))this.id=
a.id;if(a.hasOwnProperty("error")&&(b=a.error,b!==null&&b.hasOwnProperty("code"))){this.error=new ha;try{this.error.code=m.toErrorType(b.code),d.instance.warn(this.jsonClassName+" error: "+this.error.code)}catch(c){d.instance.error(c)}}if(a.hasOwnProperty("isCancelable"))this.isCancelable=a.isCancelable;if(a.hasOwnProperty("isPausable"))this.isPausable=a.isPausable;if(a.hasOwnProperty("isDeterminate"))this.isDeterminate=a.isDeterminate;if(a.hasOwnProperty("state")){b=this.state;try{b=E.toState(a.state)}catch(e){d.instance.error(e)}if(this.state!=
b)this.state=b,this.stateChangedSignal.dispatch(this)}if(a.hasOwnProperty("progress")&&(a=Number(a.progress),this.progress!=a))this.progress=a,this.progressSignal.dispatch(this)};i.extend(ia);ia.prototype.jsonClassName="LibraryUpdateTransaction";i.extend(ja);ja.prototype.jsonClassName="RestorePurchasesTransaction";i.extend(ba);ba.prototype.jsonClassName="ModifySubscriptionsListTransaction";ba.prototype._toJSON=function(){var a,b,c,e;b=i.prototype._toJSON.call(this);e=[];for(a=0;a<this.addedSubscriptions.length;a++)c=
this.addedSubscriptions[a],e.push(c._toJSON());b.addedSubscriptions=e;b.removedSubscriptions=this.removedSubscriptions;return b};i.extend(T);T.prototype.jsonClassName="SubscribeTransaction";T.prototype._toJSON=function(){var a=i.prototype._toJSON.call(this);a.productId=this.productId;return a};T.prototype._updateFromJSON=function(a){i.prototype._updateFromJSON.call(this,a);if(a.hasOwnProperty("productId"))this.productId=a.productId};i.extend(U);U.prototype.jsonClassName="UserSigninTransaction";U.prototype._toJSON=
function(){var a=i.prototype._toJSON.call(this);a.username=this.username;a.password=this.password;a.token=this.token;return a};U.prototype._updateFromJSON=function(a){i.prototype._updateFromJSON.call(this,a);if(a.hasOwnProperty("username"))this.username=a.username;if(a.hasOwnProperty("password"))this.password=a.password;if(a.hasOwnProperty("token"))this.token=a.token};i.extend(ka);ka.prototype.jsonClassName="UserSignoutTransaction";N.extend(n);n.prototype._getNextPathElement=function(a){var b=a.indexOf(".");
return b>-1?a.substring(0,b):a};n.prototype._getChildPath=function(a){var b=a.indexOf(".");return b>-1?a.substring(b+1):""};n.prototype._initialize=function(){};n.prototype._update=function(){};n.extend(h);h.prototype.activeTransactions=function(){var a={},b,c;for(b in this._allTransactions)c=this._allTransactions[b],c.state==i.ACTIVE&&(a[b]=this._allTransactions[b]);return a};h.prototype.allTransactions=function(){var a={},b;for(b in this._allTransactions)a[b]=this._allTransactions[b];return a};
h.prototype._registerTransaction=function(a,b){if(!a.hasOwnProperty("id")||a.id===null)a.id=this._generateUID();this._allTransactions[a.id]=a;a.completedSignal.add(function(a){d.instance.debug("Transaction "+a.id+" completed");delete this._allTransactions[a.id]},this,-Infinity);this._didOriginateHere(a)&&!b&&(f.instance._send({action:"add",path:"transactionManager",data:a._toJSON()}),d.instance.debug("Registered transaction "+a.id+" with native app"));return a};h.prototype._didOriginateHere=function(a){a=
a.id.split("-");return a.length>0&&a[0]==f.instance.uid?!0:!1};h.prototype._generateUID=function(){var a=f.instance.uid+"-",b=(new Date).getTime();return b!=this._lastUID?(this._lastUID=b,this._lastUIDCounter=0,a+b.toString()):(this._lastUIDCounter++,a+b.toString()+this._lastUIDCounter)};h.prototype._transactionVOProcess=function(a){var b=null;switch(a.type){case "DownloadTransaction":b=new R;break;case "ArchiveTransaction":b=new ma;break;case "LibraryUpdateTransaction":b=new ia;break;case "PreviewImageTransaction":b=
new X;break;case "PurchaseTransaction":b=new na;break;case "RestorePurchasesTransaction":b=new ja;break;case "ModifySubscriptionsListTransaction":b=new ba([],[]);break;case "SubscribeTransaction":b=new T;break;case "UserSigninTransaction":b=new U;break;case "UserSignoutTransaction":b=new ka;break;case "ViewTransaction":b=new oa;break;case "UpdateTransaction":b=new fa;break;case "CheckPreviewAvailabilityTransaction":b=new W;break;case "PreviewTransaction":b=new Y;break;case "FolioSectionListUpdateTransaction":b=
new pa;break;case "FolioInfoTransaction":b=new Z;break;default:d.instance.info("TransactionManager received unknown Transaction: "+a.type)}b!==null&&b._updateFromJSON(a);return b};h.prototype._update=function(a){var b,c,e;if(a.hasOwnProperty("add")){b=a.add;c=[];for(e=0;e<b.length;e++)a=this._transactionVOProcess(b[e]),a!==null&&(this._registerTransaction(a),c.push(a));c.length>0?(this.newTransactionsAvailableSignal.dispatch(c),d.instance.debug("TransactionManager._update added "+c.length+" transactions")):
d.instance.warn("TransactionManager._update (add) called with add that didn't add any transactions")}else a.hasOwnProperty("remove")?(c=a.remove,(a=this._allTransactions[c])?(a.completedSignal.dispatch(a),d.instance.debug("TransactionManager._update removed "+a.id)):d.instance.warn("TransactionManager._update (remove) called with unknown Transaction: "+c)):a.hasOwnProperty("update")&&a.path.indexOf("_allTransactions")>-1?(b=a.update,c=a.path.indexOf("']"),c=a.path.substring(18,c),(a=this._allTransactions[c])?
a._updateFromJSON(b):d.instance.warn("TransactionManager._update called with unknown Transaction: "+c)):d.instance.warn("TransactionManager._update (update) cannot parse update: "+JSON.stringify(a))};h.prototype._initialize=function(a){var b,c,e;if(a.hasOwnProperty("update")){if(a=a.update,a.hasOwnProperty("_allTransactions")){b=[];for(c=0;c<a._allTransactions.length;c++)e=a._allTransactions[c],e=this._transactionVOProcess(e),e!==null&&(b.push(e),this._registerTransaction(e,!0));b.length>0&&(d.instance.debug("TransactionManager._initialize registered "+
b.length+" new Transactions"),this.newTransactionsAvailableSignal.dispatch(b))}}else d.instance.warn("TransactionManager._initialize called without update")};h.instance=new h;var wa={INVALID:0,UNAVAILABLE:50,PURCHASABLE:100,PURCHASING:101,ENTITLED:200,DOWNLOADING:201,EXTRACTABLE:400,EXTRACTING:401,INSTALLED:1E3},ya={NOT_REQUESTED:0,REQUESTED:1,UNAVAILABLE:2,AVAILABLE:3,DISABLED:4};n.extend(B);B.prototype.download=function(){if(!this.isDownloadable)throw Error("Attempting to download a baseFolio that is not downloadable");
if(!this.isCompatible)throw Error("Attempting to download an incompatible baseFolio.");var a=new R(this);if(a){h.instance._registerTransaction(a);d.instance.debug("Starting new DownloadTransaction on "+this.id);try{return a.start()}catch(b){throw delete h.instance._allTransactions[a.id],b;}}else throw Error("There was a problem creating the DownloadTransaction.");};B.prototype.view=function(){if(!this.isViewable)throw Error("Attempting to view a baseFolio that is not viewable! You must check isViewable before attempting to view a baseFolio.");
if(!this.isCompatible)throw Error("Attempting to view an incompatible baseFolio.");var a=new oa(this);if(a){h.instance._registerTransaction(a);d.instance.debug("Starting new ViewTransaction on "+this.id);try{return a.start()}catch(b){throw delete h.instance._allTransactions[a.id],b;}}else throw Error("There was a problem creating the ViewTransaction.");};B.prototype.getPreviewImage=function(a,b,c){if(a=new X(this,c,a,b)){h.instance._registerTransaction(a);d.instance.debug("Starting new PreviewImageTransaction on "+
this.id);try{return a.start()}catch(e){throw delete h.instance._allTransactions[a.id],e;}}else throw Error("There was a problem creating the PreviewImageTransaction.");};B.prototype.currentStateChangingTransaction=function(){var a,b;for(a=0;a<this.currentTransactions.length;a++)if(b=this.currentTransactions[a],b instanceof I)return b;return null};B.prototype._update=function(a){a.hasOwnProperty("update")?this._updateFromJSON(a.update):d.instance.warn("BaseFolio._update ("+this.id+") cannot parse update: "+
a)};B.prototype._updateFromJSON=function(a){var b,c,e=[];for(b in a)b in this?(c=this._processPropertyUpdate(a[b],b),this[b]!=c&&(this[b]=c,e.push(b))):d.instance.warn("Found invalid property in baseFolio update: "+b+"-"+a[b]);e.length>0&&this.updatedSignal.dispatch(e)};B.prototype._processPropertyUpdate=function(a,b){var c=[],e,d,f;switch(b){case "currentTransactions":c=[];e=a.length;for(f=0;f<e;f++){if((d=h.instance._allTransactions[a[f]])&&d.folio!==this)d.folio=this;d&&c.push(d)}return c;default:return a}};
B._fromJSON=function(a){var b=new B;b._updateFromJSON(a);return b};B.extend(C);C.prototype.verifyContentPreviewSupported=function(){var a,b;for(a=0;a<this.currentTransactions.length;a++)if(b=this.currentTransactions[a],b instanceof W)return b;if(a=new W(this)){h.instance._registerTransaction(a);d.instance.debug("Starting new ContentPreviewAvailabilityTransaction on "+this.id);try{return a.start()}catch(c){throw delete h.instance._allTransactions[a.id],c;}}else throw Error("There was a problem creating the ContentPreviewAvailabilityTransaction.");
};C.prototype.canDownloadContentPreview=function(){return this.supportsContentPreview&&!this.hasSections&&this.isPurchasable&&this.isCompatible&&!this.isArchivable&&this.currentStateChangingTransaction()==null};C.prototype.downloadContentPreview=function(){if(!this.canDownloadContentPreview())throw Error("Attempting to preview a Folio that cannot be previewed! You must check canDownloadContentPreview() before attempting to preview a Folio.");var a=new Y(this);if(a){h.instance._registerTransaction(a);
d.instance.debug("Starting new PreviewContentTransaction on "+this.id);try{return a.start()}catch(b){throw delete h.instance._allTransactions[a.id],b;}}else throw Error("There was a problem creating the PreviewContentTransaction.");};C.prototype.purchase=function(){if(!this.isPurchasable)throw Error("Attempting to purchase a folio that is not purchasable");if(!this.isCompatible)throw Error("Attempting to purchase an incompatible folio.");var a=new na(this);if(a){h.instance._registerTransaction(a);
d.instance.debug("Starting new PurchaseTransaction on "+this.id);try{return a.start()}catch(b){throw delete h.instance._allTransactions[a.id],b;}}else throw Error("There was a problem creating the PurchaseTransaction.");};C.prototype.isFree=function(){return this.broker=="noChargeStore"};C.prototype.update=function(){if(!this.isUpdatable)throw Error("Attempting to update a Folio that is not updatable! You must check isUpdatable before attempting to update a Folio.");if(!this.isCompatible)throw Error("Attempting to update an incompatible Folio.");
var a=new fa(this);if(a){h.instance._registerTransaction(a);d.instance.debug("Starting new UpdateTransaction on "+this.id);try{return a.start()}catch(b){throw delete h.instance._allTransactions[a.id],b;}}else throw Error("There was a problem creating the UpdateTransaction.");};C.prototype.archive=function(){if(!this.isArchivable)throw Error("Attempting to archive a Folio that is not archivable! You must always check isArchivable before attempting to archive a Folio.");if(!this.isCompatible)throw Error("Attempting to archive an incompatible Folio.");
var a=new ma(this);if(a){h.instance._registerTransaction(a);d.instance.debug("Starting new ArchiveTransaction on "+this.id);try{return a.start()}catch(b){throw delete h.instance._allTransactions[a.id],b;}}else throw Error("There was a problem creating the ArchiveTransaction.");};C.prototype.getSections=function(){if(!this.hasSections)throw Error("Attempting to get sections on a folio that does not have sections");var a=new pa(this);if(a){h.instance._registerTransaction(a);d.instance.debug("Starting new FolioSectionListUpdateTransaction on "+
this.id);try{return a.start()}catch(b){throw delete h.instance._allTransactions[a.id],b;}}else throw Error("There was a problem creating the FolioSectionListUpdateTransaction.");};C.prototype._processPropertyUpdate=function(a,b){var c,e,d;switch(b){case "publicationDate":return new Date(parseInt(a,10));case "sections":for(c=0;c<a.length;c++)if(e=a[c],e.type=="Section")delete e.type,d=ca._fromJSON(e),d.parentFolio=this,this.sections.internal[e.id]=d;return this.sections;default:return B.prototype._processPropertyUpdate.call(this,
a,b)}};C.prototype._update=function(a){var b,c,e,g;e=this._getNextPathElement(a.path);if(e.indexOf("sections")>-1&&(b=e.indexOf("']"),e=e.substring(10,b),e=this.sections.internal[e])){a.path=this._getChildPath(a.path);e._update(a);return}if(a.hasOwnProperty("update"))this._updateFromJSON(a.update);else if(a.hasOwnProperty("add")){a=a.add;b=[];for(g=0;g<a.length;g++)c=a[g],e=null,c.type=="Section"?(delete c.type,e=ca._fromJSON(c)):d.instance.warn("Folio._update ("+this.id+") called with an invalid typed add: "+
c.type),e!==null?(e.parentFolio=this,this.sections.internal[c.id]=e,b.push(e)):d.instance.warn("Folio._update ("+this.id+") failed to parse added folio: "+folioVO.id);b.length>0?(this.sections.addedSignal.dispatch(b),d.instance.debug("Folio._update ("+this.id+") added "+b.length+" sections")):d.instance.warn("Folio._update ("+this.id+") called with add that didn't add any sections")}else if(a.hasOwnProperty("remove")){a=a.remove;b=[];for(g=0;g<a.length;g++)e=this.sections.internal[a[g]],e!==null?
(delete this.sections.internal[e.id],b.push(e)):d.instance.warn("Folio._update ("+this.id+") failed to parse removed section: "+a[g]);b.length>0?(this.sections.removedSignal.dispatch(b),d.instance.debug("Folio ("+this.id+") removed "+b.length+" sections")):d.instance.warn("Folio._update ("+this.id+") called with remove that didn't remove any sections")}else d.instance.warn("Folio._update ("+this.id+") cannot parse update: "+a)};C._fromJSON=function(a){var b=new C;b._updateFromJSON(a);return b};B.extend(ca);
ca._fromJSON=function(a){var b=new ca;b._updateFromJSON(a);return b};la.prototype.sort=function(a){var b=[],c;for(c in this.internal)b.push(this.internal[c]);b.sort(a);return b};la.prototype.getByProductId=function(a){var b,c;for(b in this.internal)if(c=this.internal[b],c.productId==a)return c;d.instance.warn("Unknown productId requested: "+a);return null};n.extend(x);x.prototype.updateLibrary=function(){if(this.currentTransaction!==null)throw Error("Attempting to update when Library is already being updated.");
var a=new ia;if(a){h.instance._registerTransaction(a);d.instance.debug("Starting new LibraryUpdateTransaction");try{return a.start()}catch(b){throw delete h.instance._allTransactions[a.id],b;}}else throw Error("There was a problem creating the LibraryUpdateTransaction.");};x.prototype._initialize=function(a){var b,c;if(a.hasOwnProperty("update"))if(a=a.update,a.hasOwnProperty("folioMap")){for(b=0;b<a.folioMap.length;b++)c=a.folioMap[b],c.type=="Folio"&&(delete c.type,this.folioMap.internal[c.id]=
C._fromJSON(c));d.instance.debug("LibraryService._initialize added "+a.folioMap.length+" folios")}else d.instance.warn("LibraryService._initialize called without a folioMap");else d.instance.warn("LibraryService._initialize called without an update element")};x.prototype._update=function(a){d.instance.debug("LibraryService._update called: "+JSON.stringify(a));var b,c,e,g;b=this._getNextPathElement(a.path);if(b.indexOf("folioMap")>-1&&(g=b.indexOf("']"),g=b.substring(10,g),g=this.folioMap.internal[g])){a.path=
this._getChildPath(a.path);g._update(a);return}if(a.hasOwnProperty("add")){a=a.add;b=[];for(c=0;c<a.length;c++)e=a[c],g=null,e.type=="Folio"?(delete e.type,g=C._fromJSON(e)):d.instance.warn("LibraryService._update called with an invalid typed add: "+e.type),g!==null?(this.folioMap.internal[e.id]=g,b.push(g)):d.instance.warn("LibraryService._update failed to parse added folio: "+e.id);b.length>0?(this.folioMap.addedSignal.dispatch(b),d.instance.debug("LibraryService._update added "+b.length+" folios")):
d.instance.warn("LibraryService._update called with add that didn't add any folios")}else if(a.hasOwnProperty("remove")){a=a.remove;b=[];for(c=0;c<a.length;c++)g=this.folioMap.internal[a[c]],g!==null?(delete this.folioMap.internal[g.id],b.push(g)):d.instance.warn("LibraryService._update failed to parse removed folio: "+a[c]);b.length>0?(this.folioMap.removedSignal.dispatch(b),d.instance.debug("Removed "+b.length+" folios")):d.instance.warn("LibraryService._update called with remove that didn't remove any folios")}else d.instance.warn("LibraryService._update cannot parse update: "+
a)};x.prototype._internalGetFolioInfo=function(a){if(a=new Z(a)){h.instance._registerTransaction(a);d.instance.debug("Starting new FolioInfoTransaction");try{return a.start()}catch(b){throw delete h.instance._allTransactions[a.id],b;}}else throw Error("There was a problem creating the FolioInfoTransaction.");};x.prototype.getFolioInfo=function(a){return this._internalGetFolioInfo(a)};x.prototype.getFolioInfoAsEntitled=function(a){return this.getFolioInfo(a)};x.instance=new x;i.extend(l);l.prototype.start=
function(){this.folio.currentTransactions.indexOf(this)==-1&&(this.folio.currentTransactions.push(this),this.folio.updatedSignal.dispatch(["currentTransactions"]));return i.prototype.start.call(this)};l.prototype._completedHandler=function(a){var b;if(a.state==E.FINISHED||a.state==E.FAILED||a.state==E.CANCELED)b=a.folio.currentTransactions.indexOf(this),b>-1&&(a.folio.currentTransactions.splice(b,1),a.folio.updatedSignal.dispatch(["currentTransactions"]),d.instance.debug("Transaction "+this.id+" finished: "+
this.state))};l.prototype.jsonClassName="FolioTransaction";l.prototype._toJSON=function(){var a=i.prototype._toJSON.call(this);a.folio=this.folio.id;return a};l.prototype._updateFromJSON=function(a){i.prototype._updateFromJSON.call(this,a);if(a.hasOwnProperty("folio")){var b;if(typeof x!="undefined")b=x.instance.folioMap.internal[a.folio];else if(typeof ReadingService!="undefined"&&ReadingService.instance.currentFolio.id==a.folio)b=ReadingService.instance.currentFolio;if(b)this.folio=b,b.currentTransactions.indexOf(this)==
-1&&(b.currentTransactions.push(this),b.updatedSignal.dispatch(["currentTransactions"]))}};l.extend(I);l.prototype.jsonClassName="FolioStateChangingTransaction";I.prototype.start=function(){var a,b;for(a=0;a<this.folio.currentTransactions.length;a++)if(b=this.folio.currentTransactions[a],b!==this&&b instanceof I&&!b._isSuspendable())throw Error("Attempting to start a FolioStateChangingTransaction on a folio that already has another FolioStateChangingTransaction acting on it: "+b.id);return l.prototype.start.call(this)};
var xa={UNKNOWN:0,FREE:1,SINGLE:2,SUBSCRIPTION:3,THIRD_PARTY:4,PROMOTIONAL:5};N.extend(V);D.prototype.jsonClassName="Subscription";D.prototype.purchase=function(){if(this.isActive())throw Error("Subscription "+this.productId+" has already been purchased.");var a=new T(this.productId);if(a){h.instance._registerTransaction(a);try{return a.start()}catch(b){throw delete h.instance._allTransactions[a.id],b;}}else throw Error("There was a problem creating the SubscribeTransaction.");};D.prototype.isActive=
function(){return this.isOwned&&this.receipt.contains(new Date)?!0:!1};D.prototype._toJSON=function(){return{type:this.jsonClassName,productId:this.productId,title:this.title,duration:this.duration,price:this.price,isOwned:this.isOwned}};D.prototype._updateFromJSON=function(a){var b=[],c;for(c in a)this.hasOwnProperty(c)?this[c]!=a[c]&&(this[c]=this._processPropertyUpdate(a[c],c),b.push(c)):d.instance.warn("Found invalid property in subscription update: "+c+"-"+a[c]);b.length>0&&this.updatedSignal.dispatch(b)};
D.prototype._processPropertyUpdate=function(a){return a};D._fromJSON=function(a){var b=new D;b._updateFromJSON(a);return b};V.extend(da);da.prototype.contains=function(a){return a>=this.startDate&&a<=this.endDate?!0:!1};var ra={NATIVE:"builtin",WEBVIEW:"webview"};N.extend(ea);ea._fromJSON=function(a){var b=new ea;b.buttonUpImage=a.upImage;b.buttonDownImage=a.downImage;b.buttonDisabledImage=a.disabledImage;b.buttonImage=a.imagePath;b.label=a.label;b.buttonTitle=a.buttonTitle;b.type=a.stateType;b.orientation=
a.orientation;return b};ea.prototype.gotoState=function(){K.instance.gotoState(this.label)};l.extend(W);W.prototype._updateFromJSON=function(a){l.prototype._updateFromJSON.call(this,a);if(a.hasOwnProperty("previewAvailable")&&this.folio.supportsContentPreview!=a.previewAvailable)this.folio.supportsContentPreview=a.previewAvailable,this.folio.updatedSignal.dispatch(["supportsContentPreview"])};W.prototype.jsonClassName="CheckPreviewAvailabilityTransaction";I.extend(ma);ma.prototype.jsonClassName="ArchiveTransaction";
I.extend(R);R.prototype._updateFromJSON=function(a){if(a.hasOwnProperty("step"))this.step=a.step;I.prototype._updateFromJSON.call(this,a)};R.prototype.jsonClassName="DownloadTransaction";l.extend(X);X.prototype.jsonClassName="PreviewImageTransaction";X.prototype._toJSON=function(){var a=l.prototype._toJSON.call(this);a.isPortrait=this.isPortrait;a.width=this.width;a.height=this.height;return a};X.prototype._updateFromJSON=function(a){l.prototype._updateFromJSON.call(this,a);if(a.hasOwnProperty("isPortrait"))this.isPortait=
a.isPortrait;if(a.hasOwnProperty("width"))this.width=a.width;if(a.hasOwnProperty("height"))this.height=a.height;if(a.hasOwnProperty("previewImageURL"))this.previewImageURL=a.previewImageURL};I.extend(na);na.prototype.jsonClassName="PurchaseTransaction";l.extend(oa);oa.prototype.jsonClassName="ViewTransaction";I.extend(fa);fa.prototype._updateFromJSON=function(a){I.prototype._updateFromJSON.call(this,a);if(a.hasOwnProperty("step"))this.step=a.step};fa.prototype.jsonClassName="UpdateTransaction";R.extend(Y);
Y.prototype._isSuspendable=function(){return!0};Y.prototype._updateFromJSON=function(a){R.prototype._updateFromJSON.call(this,a);if(this.error.code==m.TransactionFolioNoPreviewAvailable)this.folio.supportsContentPreview=!1,adobeDPS.log.debug("Transaction failed with error:TransactionFolioNoPreviewAvailable"),this.folio.updatedSignal.dispatch(["supportsContentPreview"])};Y.prototype.jsonClassName="PreviewTransaction";l.extend(pa);pa.prototype.jsonClassName="FolioSectionListUpdateTransaction";i.extend(Z);
Z.prototype.jsonClassName="FolioInfoTransaction";Z.prototype._toJSON=function(){var a=i.prototype._toJSON.call(this);a.productId=this.productId;a.folios=this.folios;return a};Z.prototype._updateFromJSON=function(a){i.prototype._updateFromJSON.call(this,a);if(a.hasOwnProperty("folios"))for(var b=0;b<a.folios.length;++b){var c=x.instance.folioMap.internal[a.folios[b]];c&&this.folios.push(c)}};n.extend(qa);qa.extend(S);S.prototype.toggle=function(a){this.isSupported&&a!=this.isEnabled&&(d.instance.debug("Setting autoArchive to: "+
a),f.instance._send({action:"call",path:"settingsService.autoArchive",data:{method:"toggle"}}))};S.prototype._update=function(a){var b;if(a.hasOwnProperty("update")){b=[];a=a.update;if(a.hasOwnProperty("isSupported"))this.isSupported=a.isSupported,b.push("isSupported");if(a.hasOwnProperty("isEnabled"))this.isEnabled=a.isEnabled,b.push("isEnabled");b.length>0&&this.updatedSignal.dispatch(b)}else d.instance.warn("AutoArchive._update cannot parse update: "+JSON.stringify(a))};S.prototype._initialize=
function(a){this._update(a)};S.instance=new S;qa.extend($);$.prototype._update=function(a){var b;if(a.hasOwnProperty("update")){b=[];a=a.update;if(a.hasOwnProperty("isSupported"))this.isSupported=a.isSupported,b.push("isSupported");if(a.hasOwnProperty("isEnabled"))this.isEnabled=a.isEnabled,b.push("isEnabled");b.length>0&&this.updatedSignal.dispatch(b)}else d.instance.warn("Analytics._update cannot parse update: "+JSON.stringify(a))};$.prototype._initialize=function(a){this._update(a)};$.instance=
new $;n.extend(r);r.ALLOWED_VARIABLES="stackId,screenId,stackTitle,overlayId,overlayType,isOnline,folioManifestId,isAdView,productId,entitlementCategory,purchasePrice,purchaseUnits,isAutoStarted,customVariable1,customVariable2,customVariable3,customVariable4,customVariable5,customVariable6,customVariable7,customVariable8,customVariable9,customVariable10".split(",");r.ALLOWED_EVENTS="customEvent1,customEvent2,customEvent3,customEvent4,customEvent5,customEvent6,customEvent7,customEvent8,customEvent9,customEvent10".split(",");
r.PURCHASE_CATEGORIES={subscription:"subscription",single:"single",free:"free",external:"external"};r.prototype._variableAliases={stackIndex:"stackId",stackId:"stackId",screenIndex:"screenId",screenId:"screenId",adTitle:"stackTitle",articleTitle:"stackTitle",stackTitle:"stackTitle",overlayId:"overlayId",overlayType:"overlayType",isOnline:"isOnline",issueName:"folioManifestId",folioManifestId:"folioManifestId",isAdView:"isAdView",productId:"productId",entitlementCategory:"entitlementCategory",purchasePrice:"purchasePrice",
purchaseUnits:"purchaseUnits",isAutoStarted:"isAutoStarted",customVariable1:"customVariable1",customVariable2:"customVariable2",customVariable3:"customVariable3",customVariable4:"customVariable4",customVariable5:"customVariable5",customVariable6:"customVariable6",customVariable7:"customVariable7",customVariable8:"customVariable8",customVariable9:"customVariable9",customVariable10:"customVariable10"};r.prototype._eventAliases={customEvent1:"customEvent1",customEvent2:"customEvent2",customEvent3:"customEvent3",
customEvent4:"customEvent4",customEvent5:"customEvent5",customEvent6:"customEvent6",customEvent7:"customEvent7",customEvent8:"customEvent8",customEvent9:"customEvent9",customEvent10:"customEvent10"};r.prototype.setCustomVariableAlias=function(a,b){if(r.ALLOWED_VARIABLES.indexOf(a)>-1)this._variableAliases[b]=a;else throw Error("AnalyticsService.setCustomVariableAlias called with invalid realName: "+a);};r.prototype.setCustomEventAlias=function(a,b){if(r.ALLOWED_EVENTS.indexOf(a)>-1)this._eventAliases[b]=
a;else throw Error("AnalyticsService.setCustomEventAlias called with invalid realName:"+a);};r.prototype.trackPurchaseStart=function(a,b,c){c.entitlementCategory=a;c.productId=b;f.instance._send({action:"call",path:"analyticsService",data:{method:"trackPurchaseStart",event:{analyticsEvent:"kFolioPurchaseStartedAnalyticsEvent",analyticsEventName:"",variables:c}}})};r.prototype.trackPurchaseComplete=function(a,b,c,e,d){d.entitlementCategory=a;d.productId=b;d.purchasePrice=e;d.purchaseUnits=c;f.instance._send({action:"call",
path:"analyticsService",data:{method:"trackPurchaseComplete",event:{analyticsEvent:"kFolioPurchaseCompletedAnalyticsEvent",analyticsEventName:"",variables:d}}})};r.prototype.trackCustomEvent=function(a,b){if(r.ALLOWED_EVENTS.indexOf(this._eventAliases[a])!=-1)f.instance._send({action:"call",path:"analyticsService",data:{method:"trackCustomEvent",event:{analyticsEvent:this._eventAliases[a],analyticsEventName:a,variables:b}}});else throw Error("AnalyticsService.trackCustomEvent called with invalid eventName: "+
a);};r.instance=new r;n.extend(J);J.prototype.login=function(a,b,c){if(this.isUserAuthenticated)throw Error("Login failed. User is already authenticated.");else if(a=new U(a,b,c)){h.instance._registerTransaction(a);d.instance.debug("Starting new UserSigninTransaction");try{return a.start()}catch(e){throw delete h.instance._allTransactions[a.id],e;}}else throw Error("There was a problem creating the UserSigninTransaction.");};J.prototype.logout=function(){if(this.isUserAuthenticated){var a=new ka;
if(a){h.instance._registerTransaction(a);d.instance.debug("Starting new UserSignoutTransaction");try{return a.start()}catch(b){throw delete h.instance._allTransactions[a.id],b;}}else throw Error("There was a problem creating the UserSignoutTransaction.");}else throw Error("Logout failed. User is not authenticated.");};J.prototype._update=function(a){d.instance.debug("AuthenticationService.prototype._update called:"+JSON.stringify(a));if(a.hasOwnProperty("update")){var b,c,a=a.update;b=[];if(a.hasOwnProperty("currentTransaction")&&
(c=h.instance._allTransactions[a.currentTransaction],this.currentTransaction!=c))this.currentTransaction=c,b.push("currentTransaction");if(a.hasOwnProperty("userName")&&this.userName!=a.userName)this.userName=a.userName,b.push("userName");if(a.hasOwnProperty("token")&&(d.instance.debug("old:"+this.token+" new:"+a.token),this.token!=a.token))this.token=a.token,b.push("token");if(a.hasOwnProperty("isUserAuthenticated")&&this.isUserAuthenticated!=a.isUserAuthenticated)this.isUserAuthenticated=a.isUserAuthenticated,
this.userAuthenticationChangedSignal.dispatch(this.isUserAuthenticated),b.push("isUserAuthenticated");b.length>0&&this.updatedSignal.dispatch(b)}else d.instance.warn("AuthenticationService._update called without update")};J.prototype.displaySignIn=function(){d.instance.debug("AuthenticationService.prototype.displaySignIn called.");f.instance._send({action:"call",path:"authenticationService",data:{method:"displaySignIn"}})};J.prototype._initialize=function(a){this._update(a)};J.instance=new J;n.extend(K);
var s=Math.floor(Math.random()*2E9);K.prototype._initialize=function(a){var b;if(a.hasOwnProperty("update")){var c=a.update;if(c.hasOwnProperty("applicationID"))this.applicationID=c.applicationID;if(c.hasOwnProperty("applicationVersion"))this.applicationVersion=c.applicationVersion;if(c.hasOwnProperty("adobeApplicationVersion"))this.adobeApplicationVersion=c.adobeApplicationVersion;if(c.hasOwnProperty("applicationStates"))for(a=0;a<c.applicationStates.length;a++)if(b=c.applicationStates[a],b.hasOwnProperty("type")&&
b.type=="ApplicationState"&&(b=ea._fromJSON(b),b.type==ra.NATIVE||b.type==ra.WEBVIEW))this.applicationStates[b.label]=b;if(c.hasOwnProperty("applicationContext"))this.applicationContext=c.applicationContext}else d.instance.warn("ConfigurationService._initialize called without update")};K.prototype._update=function(a){if(a.hasOwnProperty("update"))if(a.update.hasOwnProperty("callbackId")){var b=this.callbacks[a.update.callbackId];b.hasOwnProperty("nativeData")&&b.nativeData.method=="canOpenURL"&&(b.callbackFunction(b.nativeData.url,
a.update.urlCanBeOpened),delete this.callbacks[a.update.callbackId])}else this.applicationContext=a.update,this.applicationContextUpdatedSignal.dispatch();else d.instance.warn("ConfigurationService._update called without update")};K.prototype.gotoState=function(a){if(this.applicationStates.hasOwnProperty(a))f.instance._send({action:"call",path:"configurationService",data:this.applicationStates[a]});else throw Error("ConfigurationService.gotoState called with invalid state label: "+a);};K.prototype.canOpenURL=
function(a,b){var c={method:"canOpenURL",url:a,callbackId:s};this.callbacks[s]={callbackFunction:b,nativeData:c};f.instance._send({action:"call",path:"configurationService",data:c});s++};K.instance=new K;n.extend(y);y.prototype._initialize=function(a){if(a.hasOwnProperty("update")){a=a.update;if(a.hasOwnProperty("isCustomDialogDisplaying"))this.isCustomDialogDisplaying=a.isCustomDialogDisplaying;if(a.hasOwnProperty("isWelcomeScreenDisplaying"))this.isWelcomeScreenDisplaying=a.isWelcomeScreenDisplaying;
if(a.hasOwnProperty("isCustomWebviewDisplaying"))this.isCustomWebviewDisplaying=a.isCustomWebviewDisplaying}else d.instance.warn("DialogService._initialize called without update")};y.prototype._update=function(a){if(a.hasOwnProperty("update")){var b=[],a=a.update;if(a.hasOwnProperty("isCustomDialogDisplaying")&&this.isCustomDialogDisplaying!=a.isCustomDialogDisplaying)this.isCustomDialogDisplaying=a.isCustomDialogDisplaying,b.push("isCustomDialogDisplaying");if(a.hasOwnProperty("isWelcomeScreenDisplaying")&&
this.isWelcomeScreenDisplaying!=a.isWelcomeScreenDisplaying)this.isWelcomeScreenDisplaying=a.isWelcomeScreenDisplaying,b.push("isWelcomeScreenDisplaying");this.updatedSignal.dispatch(b)}else d.instance.warn("DialogService._update called without update")};y.prototype.displayCustomDialog=function(){if(this.isCustomDialogDisplaying)throw Error("displayCustomDialog called while a dialog is displaying!");f.instance._send({action:"call",path:"dialogService",data:{method:"displayCustomDialog"}})};y.prototype.dismissCustomDialog=
function(){if(!this.isCustomDialogDisplaying)throw Error("dismissCustomDialog called but no dialog is displaying");f.instance._send({action:"call",path:"dialogService",data:{method:"dismissCustomDialog"}})};y.prototype.dismissWelcomeScreen=function(){if(!this.isWelcomeScreenDisplaying)throw Error("dismissWelcomeScreen called but no Welcome Screen is displaying");f.instance._send({action:"call",path:"dialogService",data:{method:"dismissWelcomeScreen"}})};y.prototype.displayCustomWebview=function(a){adobeDPS.log.info("DialogService.displayCustomWebview: "+
a);f.instance._send({action:"call",path:"dialogService",data:{method:"displayCustomWebview",url:a}})};y.prototype.dismissCustomWebview=function(){if(!this.isCustomWebviewDisplaying)throw Error("dismissCustomWebview called but no custom webview is displaying");f.instance._send({action:"call",path:"dialogService",data:{method:"dismissCustomWebview"}})};y.prototype.open=function(a){adobeDPS.log.info("DialogService.open "+a);a.toLowerCase().search(/^https{0,1}:\/\//)==-1?adobeDPS.log.error(Error("DialogService.open does not support relative URLs")):
f.instance._send({action:"call",path:"dialogService",data:{method:"open",url:a}})};y.prototype.close=function(){adobeDPS.log.info("DialogService.close");f.instance._send({action:"call",path:"dialogService",data:{method:"close"}})};y.prototype.openExternal=function(a){adobeDPS.log.info("DialogService.openExternal "+a);a.toLowerCase().search(/^https{0,1}:\/\//)==-1?adobeDPS.log.error(Error("DialogService.open does not support relative URLs")):f.instance._send({action:"call",path:"dialogService",data:{method:"openExternal",
url:a}})};y.instance=new y;var Ca={UNKNOWN:"unknown",WIFI:"wifi",MOBILE:"mobile"},Da={RESTRICTED:0,DISABLED:1,ENABLED:2,NOTSUPPORTED:3},s=Math.floor(Math.random()*2E9);n.extend(O);O.prototype._initialize=function(a){if(a.hasOwnProperty("update")){a=a.update;if(a.hasOwnProperty("deviceId"))this.deviceId=a.deviceId;if(a.hasOwnProperty("os"))this.os=a.os;if(a.hasOwnProperty("deviceName"))this.deviceName=a.deviceName;if(a.hasOwnProperty("isPurchasingEnabled"))this.isPurchasingEnabled=a.isPurchasingEnabled;
if(a.hasOwnProperty("isOnline"))this.isOnline=a.isOnline;if(a.hasOwnProperty("networkType"))this.networkType=a.networkType;if(a.hasOwnProperty("pushNotificationToken"))this.pushNotificationToken=a.pushNotificationToken;if(a.hasOwnProperty("omnitureVisitorId"))this.omnitureVisitorId=a.omnitureVisitorId;if(a.hasOwnProperty("identifierForVendor"))this.identifierForVendor=a.identifierForVendor;if(a.hasOwnProperty("advertisingIdentifier"))this.advertisingIdentifier=a.advertisingIdentifier;if(a.hasOwnProperty("isAdvertisingTrackingEnabled"))this.isAdvertisingTrackingEnabled=
a.isAdvertisingTrackingEnabled;if(a.hasOwnProperty("backgroundRefreshState"))this.backgroundRefreshState=a.backgroundRefreshState}else d.instance.warn("DeviceService._initialize called without update")};O.prototype._update=function(a){if(a.hasOwnProperty("update")){var b=[],a=a.update;if(a.hasOwnProperty("status")){d.instance.enableLogging=!0;var c=this.callbacks[a.callbackId];this.status=a.status;this.status!=1&&c.fail(a.errorCode,a.errorMessage);delete this.callbacks[a.callbackId]}if(a.hasOwnProperty("deviceId")&&
this.deviceId!=a.deviceId)this.deviceId=a.deviceId,b.push("deviceId");if(a.hasOwnProperty("os")&&this.os!=a.os)this.os=a.os,b.push("os");if(a.hasOwnProperty("deviceName")&&this.deviceName!=a.deviceName)this.deviceName=a.deviceName,b.push("deviceName");if(a.hasOwnProperty("isPurchasingEnabled")&&this.isPurchasingEnabled!=a.isPurchasingEnabled)this.isPurchasingEnabled=a.isPurchasingEnabled,b.push("isPurchasingEnabled");if(a.hasOwnProperty("isOnline")&&this.isOnline!=a.isOnline)this.isOnline=a.isOnline,
b.push("isOnline");if(a.hasOwnProperty("networkType")&&this.networkType!=a.networkType)this.networkType=a.networkType,b.push("networkType");if(a.hasOwnProperty("pushNotificationToken")&&this.pushNotificationToken!=a.pushNotificationToken)this.pushNotificationToken=a.pushNotificationToken,b.push("pushNotificationToken");if(a.hasOwnProperty("omnitureVisitorId")&&this.omnitureVisitorId!=a.omnitureVisitorId)this.omnitureVisitorId=a.omnitureVisitorId,b.push("omnitureVisitorId");if(a.hasOwnProperty("identifierForVendor")&&
this.identifierForVendor!=a.identifierForVendor)this.identifierForVendor=a.identifierForVendor,b.push("identifierForVendor");if(a.hasOwnProperty("advertisingIdentifier")&&this.advertisingIdentifier!=a.advertisingIdentifier)this.advertisingIdentifier=a.advertisingIdentifier,b.push("advertisingIdentifier");if(a.hasOwnProperty("isAdvertisingTrackingEnabled")&&this.isAdvertisingTrackingEnabled!=a.isAdvertisingTrackingEnabled)this.isAdvertisingTrackingEnabled=a.isAdvertisingTrackingEnabled,b.push("isAdvertisingTrackingEnabled");
if(a.hasOwnProperty("backgroundRefreshState")&&this.backgroundRefreshState!=a.backgroundRefreshState)this.backgroundRefreshState=a.backgroundRefreshState,b.push("backgroundRefreshState");this.updatedSignal.dispatch(b)}else d.instance.warn("DeviceService._update called without update")};O.prototype.enableAdvertisingFramework=function(a){this.callbacks[s]={fail:a};f.instance._send({action:"call",path:"deviceService",data:{method:"enableAdvertisingFramework",callbackId:s}});s++};O.instance=new O;n.extend(t);
t.prototype.registerNewReceipt=function(a,b){var c;if(a instanceof da){if((c=this.availableSubscriptions[a.productId])&&(c.receipt===null||c.receipt.endDate<a.endDate))c.receipt=a,c.isOwned=!0;c=a.productId+a.endDate.getTime().toString();this.subscriptionReceipts.hasOwnProperty(c)||(this.subscriptionReceipts[c]=a,b||this.newReceiptsAvailableSignal.dispatch([a]))}else if(a instanceof V){if(c=x.instance.folioMap.getByProductId(a.productId))c.receipt=a;this.receipts.hasOwnProperty(a.productId)||(this.receipts[a.productId]=
a,b||this.newReceiptsAvailableSignal.dispatch([a]))}else throw Error("ReceiptService.registerNewReceipt received invalid receipt");return a};t.prototype.restorePurchases=function(){var a=new ja;if(a){h.instance._registerTransaction(a);d.instance.debug("Starting new RestorePurchasesTransaction");try{return a.start()}catch(b){throw delete h.instance._allTransactions[a.id],b;}}else throw Error("There was a problem creating the RestorePurchasesTransaction.");};t.prototype.addSubscription=function(a){if(toString.call(a)==
"[object String]"&&a!="")return this.addSubscriptions([a]);else throw Error("ReceiptService.addSubscription received invalid product ID");};t.prototype.addSubscriptions=function(a){var b,c,e;if(a instanceof Array){c=[];for(b=0;b<a.length;b++)if(e=a[b],toString.call(e)=="[object String]"&&e!="")this.availableSubscriptions[e]==null&&c.push(new D(e,"","","",!1));else throw Error("ReceiptService.addSubscriptions received invalid product ID");if(c.length>0)return this._createModifySubscriptionsListTransaction(c,
[]);else throw Error("Tried to add subscription(s) that already existed");}else throw Error("ReceiptService.addSubscriptions received invalid input");};t.prototype.removeSubscription=function(a){if(toString.call(a)=="[object String]"&&a!="")return this.removeSubscriptions([a]);else throw Error("ReceiptService.removeSubscription received invalid product ID");};t.prototype.removeSubscriptions=function(a){var b,c,e;if(a instanceof Array){c=[];for(b=0;b<a.length;b++)if(e=a[b],toString.call(e)=="[object String]"&&
e!="")e=this.availableSubscriptions[e],e!=null&&c.push(e.productId);else throw Error("ReceiptService.removeSubscriptions received invalid product ID");if(c.length>0)return this._createModifySubscriptionsListTransaction([],c);else throw Error("Tried to remove subscription(s) that did not exist");}else throw Error("ReceiptService.removeSubscriptions received invalid input");};t.prototype.setSubscription=function(a){if(toString.call(a)=="[object String]"&&a!="")return this.setSubscriptions([a]);else throw Error("ReceiptService.setSubscription received invalid product ID");
};t.prototype.setSubscriptions=function(a){var b,c,e,d;if(a instanceof Array){c=[];for(b=0;b<a.length;b++)if(e=a[b],toString.call(e)=="[object String]"&&e!="")d=this.availableSubscriptions[e],d==null&&c.push(new D(e,"","","",!1));else throw Error("ReceiptService.setSubscriptions received invalid product ID");b=[];for(e in this.availableSubscriptions)a.indexOf(e)==-1&&b.push(e);return this._createModifySubscriptionsListTransaction(c,b)}else throw Error("ReceiptService.setSubscriptions received invalid input");
};t.prototype._createModifySubscriptionsListTransaction=function(a,b){var c=new ba(a,b);if(c){h.instance._registerTransaction(c);d.instance.debug("Starting new ModifySubscriptionsListTransaction");d.instance.debug("ADDING:"+JSON.stringify(a));d.instance.debug("REMOVING:"+JSON.stringify(b));try{return c.start()}catch(e){throw delete h.instance._allTransactions[c.id],e;}}else throw Error("There was a problem creating the ModifySubscriptionsListTransaction.");};t.prototype.displaySubscribe=function(){f.instance._send({action:"call",
path:"receiptService",data:{method:"displaySubscribe"}})};t.prototype._initialize=function(a){var b,c,e,g;if(a.hasOwnProperty("update")){a=a.update;b=[];if(a.hasOwnProperty("activeSubscription"))g=a.activeSubscription,g.type=="Subscription"?(delete g.type,this.activeSubscription=D._fromJSON(g)):this.activeSubscription=null;if(a.hasOwnProperty("receipts"))for(c in a.receipts)g=a.receipts[c],g=new V(g.broker,c,g.token),this.registerNewReceipt(g,!0),b.push(g);if(a.hasOwnProperty("availableSubscriptions"))for(c in a.availableSubscriptions)g=
a.availableSubscriptions[c],this.availableSubscriptions[g.productId]=new D(c,g.title,g.duration,g.price,g.isOwned);if(a.hasOwnProperty("subscriptionReceipts"))for(e in a.subscriptionReceipts){g=a.subscriptionReceipts[e];c=e.split("+");c=c.length>0?c[0]:e;g=new da(g.broker,c,g.token,new Date(g.startDate),g.endDate===null?null:new Date(g.endDate));if((c=this.availableSubscriptions[g.productId])&&(c.receipt===null||c.receipt.endDate<g.endDate))c.receipt=g,c.isOwned=!0;this.registerNewReceipt(g,!0);b.push(g)}b.length>
0&&(this.newReceiptsAvailableSignal.dispatch(b),d.instance.debug("ReceiptService._initialize added "+b.length+" receipts"))}else d.instance.warn("ReceiptService._initialize called without update")};t.prototype._update=function(a){var b,c,e,g,f;d.instance.debug("ReceiptService._update called: "+JSON.stringify(a));if(a.hasOwnProperty("add")){b=a.add;c=[];e=[];for(g=0;g<b.length;g++)if(f=b[g],f.type=="Receipt")f=new V(f.broker,f.productId,f.token),this.registerNewReceipt(f,!0),c.push(f);else if(f.type==
"SubscriptionReceipt"){f=new da(f.broker,f.productId,f.token,new Date(f.startDate),f.endDate===null?null:new Date(f.endDate));if((a=this.availableSubscriptions[f.productId])&&(a.receipt===null||a.receipt.endDate<f.endDate))a.receipt=f,a.isOwned=!0;d.instance.debug("\nReceiptService updated with Subscription Receipt: "+JSON.stringify(f));this.registerNewReceipt(f,!0);c.push(f)}else f.type=="Subscription"?(delete f.type,a=D._fromJSON(f),this.availableSubscriptions[f.productId]=a,e.push(a)):d.instance.warn("ReceiptService called with unknown add: "+
f.type);c.length>0&&(this.newReceiptsAvailableSignal.dispatch(c),d.instance.debug("ReceiptService._update added "+c.length+" receipts"));e.length>0&&(this.subscriptionsAddedSignal.dispatch(e),d.instance.debug("ReceiptService._update added "+e.length+" subscriptions"));c.length==0&&e.length==0&&d.instance.warn("ReceiptService._update called with an add that resulted in no new receipts or subscriptions")}else if(a.hasOwnProperty("remove")){c=a.remove;b=[];for(g=0;g<c.length;g++)a=this.availableSubscriptions[c[g]],
a!==null?(delete this.availableSubscriptions[a.productId],b.push(a)):d.instance.warn("LibraryService._update failed to parse removed subscription: "+c[g]);b.length>0?(this.subscriptionsRemovedSignal.dispatch(b),d.instance.debug("Removed "+b.length+" subscriptions")):d.instance.warn("LibraryService._update called with remove that didn't remove any subscriptions")}else if(a.hasOwnProperty("update"))if(b=a.update,a.path.indexOf("availableSubscriptions")>-1)g=a.path.indexOf("']"),g=a.path.substring(24,
g),(a=this.availableSubscriptions[g])?a._updateFromJSON(b):d.instance.warn("ReceiptService._update called with unknown Sub: "+g);else{if(b.hasOwnProperty("activeSubscription"))f=b.activeSubscription,f.type=="Subscription"?(delete f.type,this.activeSubscription=D._fromJSON(f)):this.activeSubscription=null,this.updatedSignal.dispatch(["activeSubscription"])}else d.instance.warn("ReceiptService._update called without add")};t.instance=new t;n.extend(P);P.prototype._initialize=function(a){var b;if(a.hasOwnProperty("update"))for(b in a=
a.update,a)d.instance.debug("Found "+b+" setting."),this.hasOwnProperty(b)?this[b]._initialize(a[b]):d.instance.warn("SettingsService._initialize called with unknown setting: "+b);else d.instance.warn("SettingsService._initialize called without update")};P.prototype._update=function(a){var b=this._getNextPathElement(a.path);a.path=this._getChildPath(a.path);switch(b){case "autoArchive":d.instance.debug("Initializing SettingsService.AutoArchive...");this.autoArchive._update(a);break;case "analytics":d.instance.debug("Initializing SettingsService.Analytics...");
this.analytics._update(a);break;default:d.instance.warn("SettingsService._update called with an unknown destination: "+b)}};P.prototype.displaySettingsDialog=function(){f.instance._send({action:"call",path:"settingsService",data:{method:"displaySettingsDialog"}})};P.instance=new P;var Ka=function(a,b){this.coords=a;this.timestamp=b===void 0?new Date:b instanceof Date?b:new Date(b)};aa.PERMISSION_DENIED=1;aa.POSITION_UNAVAILABLE=2;aa.TIMEOUT=3;var ua=Math.pow(2,31)-1,s=Math.floor(Math.random()*2E9);
n.extend(L);L.prototype._update=function(a){if(a.hasOwnProperty("update"))if(a=a.update,a.hasOwnProperty("status")){var b=this.callbacks[a.callbackId];clearTimeout(b.timeout.timer);if(a.status===1){if(b.timeout.timer){var c=new Ea(a.latitude,a.longitude,a.altitude,a.accuracy,a.course,a.speed,a.altitudeAccuracy);this.lastPosition=c=new Ka(c,a.timestamp);b.success(c)}}else b.timeout.timer=null,b.fail&&(c=new aa(a.errorCode,a.errorMessage),b.fail(c));delete this.callbacks[a.callbackId]}else d.instance.warn("GeolocationService._update called without status");
else d.instance.warn("GeolocationService._update called without update")};L.prototype.getCurrentPosition=function(a,b,c){if(a===void 0||a===null)throw Error("Invalid success callback function!");var d=new Fa;if(c){if(c.maximumAge!==void 0&&!isNaN(c.maximumAge)&&c.maximumAge>=0)d.maximumAge=c.maximumAge>=ua?ua:c.maximumAge;if(c.enableHighAccuracy!==void 0)d.enableHighAccuracy=c.enableHighAccuracy;if(c.timeout!==void 0&&!isNaN(c.timeout))d.timeout=c.timeout<0?0:c.timeout>=ua?-1:c.timeout}c=d;d={timer:null};
this.lastPosition&&c.maximumAge&&(new Date).getTime()-this.lastPosition.timestamp.getTime()<=c.maximumAge?a(this.lastPosition):c.timeout===0?b({code:aa.TIMEOUT,message:"timeout value in PositionOptions set to 0 and no cached Position object available, or cached Position object's age exceeds provided PositionOptions' maximumAge parameter."}):(d.timer=c.timeout!==-1?Ga(s,c.timeout):!0,this.callbacks[s]={success:a,fail:b,timeout:d},f.instance._send({action:"call",path:"geolocationService",data:{method:"getCurrentPosition",
callbackId:s,highAccuracy:c&&c.enableHighAccuracy!==void 0?c.enableHighAccuracy:!1,maximumAge:c.maximumAge,timeout:c.timeout}}),s++)};L.prototype.watchPosition=function(){throw Error("geolocation.watchPosition API is currently not supported!");};L.prototype.clearWatch=function(){throw Error("geolocation.clearWatch API is currently not supported!");};L.instance=new L;n.extend(v);var s=Math.floor(Math.random()*2E9),Ba=Math.floor(Math.random()*2E9);v.prototype._initialize=function(){};v.prototype.EventItem=
function(a,b,c,d){this.summary=a;this.description=b||void 0;this.location=c||void 0;this.alarms=d||void 0};v.prototype.CalendarEvent=function(a,b,c,d,f){this.eventItem=new v.instance.EventItem(a.summary,a.description,a.location,a.alarms);this.startDate=b;this.endDate=c;this.allDay=d||!1;this.eventId=f||Ba++};v.prototype.ReminderEvent=function(a,b,c,d){this.eventItem=new v.instance.EventItem(a.summary,a.description,a.location,a.alarms);this.listTitle=b||void 0;this.dueDate=c||void 0;this.eventId=d||
Ba++};v.prototype.EventResult=function(a,b,c,d,f){this.success=a;this.eventType=b;this.eventId=c;this.errorCode=d;this.errorMessage=f};v.prototype._update=function(a){if(a.hasOwnProperty("update"))if(a.update.hasOwnProperty("callbackId")){var b=0,c=this.callbacks[a.update.callbackId];if(c.hasOwnProperty("method")){var e=null,f;c.method=="addEvents"?(e=a.update.results,f=!1):c.method=="addEvent"&&(e=[a.update.results],f=!0);if(e){var b=e.length,h,i=[],j=[],k=0,m=0;for(h=0;h<b;h++){var l=e[h];l.success?
i[k++]=l:j[m++]=l}k>0&&(f?c.successCallback(i[0]):c.successCallback(i));m>0&&(f?c.errorCallback(j[0]):c.errorCallback(j))}}c.eventCount-=b;c.eventCount==0&&delete this.callbacks[a.update.callbackId]}else d.instance.warn("CalendarService._update called without callbackId");else d.instance.warn("CalendarService._update called without update")};v.prototype.ErrorType={Unknown:0,AccessToCalendarRestricted:1,AccessToRemindersRestricted:2,AccessToCalendarDenied:3,AccessToRemindersDenied:4};v.prototype.addEvent=
function(a,b,c){a={method:"addEvent",event:a,callbackId:s};this.callbacks[s]={method:a.method,eventCount:1,successCallback:b||function(){},errorCallback:c||function(){}};f.instance._send({action:"call",path:"calendarService",data:a});s++};v.prototype.addEvents=function(a,b,c){var d={method:"addEvents",events:a,callbackId:s};this.callbacks[s]={method:d.method,eventCount:a.length,successCallback:b||function(){},errorCallback:c||function(){}};f.instance._send({action:"call",path:"calendarService",data:d});
s++};v.instance=new v;var Ia={RECORDING_STARTED:1,RECORDING_STOPPED:2,RECORDING_STOPPED_BY_ERROR:3,RECORDING_STOPPED_BY_APP_SHUTDOWN:4},M={STORAGE_OUT_OF_SPACE:1,STORAGE_IO_ERROR:2,RECORDING_ALREADY_STARTED:11,RECORDING_NOT_STARTED:12,RECORDING_INVALID_ID:13,RECORDING_INVALID_ARGUMENT:14};n.extend(F);F.prototype._initialize=function(a){if(a.hasOwnProperty("update")){a=a.update;if(a.hasOwnProperty("supportedEventNames"))this.supportedEventNames=a.supportedEventNames;if(a.hasOwnProperty("supportedEventAttributes"))this.supportedEventAttributes=
a.supportedEventAttributes;if(a.hasOwnProperty("recordings"))this.recordings=a.recordings;if(a.hasOwnProperty("currentRecordingId"))this.currentRecordingId=a.currentRecordingId}else d.instance.warn("DialogService._initialize called without update")};F.prototype._update=function(a){if(a.hasOwnProperty("update")){if(a=a.update,a.hasOwnProperty("status")){var b=this.callbacks[a.callbackId];delete this.callbacks[a.callbackId];if(a.currentRecordingId!==void 0&&this.currentRecordingId!==a.currentRecordingId||
a.recordings!==void 0&&this.recordings!==a.recordings)this.recordings=a.recordings,this.currentRecordingId=a.currentRecordingId,this.stateChangedSignal.dispatch();if(a.status===1)if(w(b))switch(b.type){case "getEvents":G(b.successCB,{recordingId:a.recordingId,events:a.events});break;case "deleteEvents":G(b.successCB,a.recordingId);break;default:b.successCB()}else{if(w(a.eventsCount))for(b=0;b<this.recordings.length;++b)if(this.recordings[b].recordingId==a.recordingId){this.recordings[b].eventsCount=
a.eventsCount;this.stateChangedSignal.dispatch();break}}else w(b)&&(a.storageSize===void 0?G(b.errorCB,{recordingId:a.recordingId,error:{code:a.errorCode,message:a.errorMessage}}):G(b.errorCB,{recordingId:a.recordingId,error:{code:a.errorCode,message:a.errorMessage,storageSize:a.storageSize}}))}}else d.instance.warn("FolioActivityService._update called without update data")};F.prototype.startRecording=function(a,b,c,d){z(d,"Undefined error callback function");Ha(b,this.supportedEventNames)?sa(a)?
!j(c)&&w(c)?(b={code:M.RECORDING_INVALID_ARGUMENT,message:"Invalid success callback"},d({recordingId:a,error:b})):(this.callbacks[this.callbackId]={type:"startRecording",successCB:c,errorCB:d},f.instance._send({action:"call",path:"folioActivityService",data:{method:"startRecording",callbackId:this.callbackId,recordingId:a,config:b}}),this.callbackId++):(b={code:M.RECORDING_INVALID_ID,message:"Invalid recordingId"},d({recordingId:a,error:b})):(b={code:M.RECORDING_INVALID_ARGUMENT,message:"Invalid config"},
d({recordingId:a,error:b}))};F.prototype.stopRecording=function(a,b){z(b,"Undefined error callback function");!j(a)&&w(a)?b({recordingId:void 0,error:{code:M.RECORDING_INVALID_ARGUMENT,message:"Invalid success callback"}}):(this.callbacks[this.callbackId]={type:"stopRecording",successCB:a,errorCB:b},f.instance._send({action:"call",path:"folioActivityService",data:{method:"stopRecording",callbackId:this.callbackId}}),this.callbackId++)};F.prototype.getEvents=function(a,b,c){z(c,"Undefined error callback function");
sa(a)?j(b)?(this.callbacks[this.callbackId]={type:"getEvents",successCB:b,errorCB:c},f.instance._send({action:"call",path:"folioActivityService",data:{method:"getEvents",callbackId:this.callbackId,recordingId:a}}),this.callbackId++):(b={code:M.RECORDING_INVALID_ARGUMENT,message:"Invalid success callback function"},c({recordingId:a,error:b})):(b={code:M.RECORDING_INVALID_ID,message:"Invalid recordingId"},c({recordingId:a,error:b}))};F.prototype.deleteEvents=function(a,b,c){z(c,"Undefined error callback function");
!sa(a)&&w(a)&&!(typeof a==="string"&&a.length===0)?(b={code:M.RECORDING_INVALID_ID,message:"Invalid recordingId"},c({recordingId:a,error:b})):!j(b)&&w(b)?(b={code:M.RECORDING_INVALID_ARGUMENT,message:"Invalid success callback"},c({recordingId:a,error:b})):(this.callbacks[this.callbackId]={type:"deleteEvents",successCB:b,errorCB:c},f.instance._send({action:"call",path:"folioActivityService",data:{method:"deleteEvents",callbackId:this.callbackId,recordingId:a}}),this.callbackId++)};F.prototype.resetService=
function(a,b){z(b,"Undefined error callback function");!j(a)&&w(a)?b({recordingId:void 0,error:{code:M.RECORDING_INVALID_ARGUMENT,message:"Invalid success callback"}}):(this.callbacks[this.callbackId]={type:"resetService",successCB:a,errorCB:b},f.instance._send({action:"call",path:"folioActivityService",data:{method:"resetService",callbackId:this.callbackId}}),this.callbackId++)};F.instance=new F;var p={OPERATION_IN_PROGRESS:1,INVALID_AUTH_SESSION:2,INVALID_ARGUMENTS:3};n.extend(H);H.prototype._update=
function(a){if(a.hasOwnProperty("update")){if(a=a.update,a.hasOwnProperty("status"))if(a.status===1){if(o(a.callbackId)){var b=this.callback;this.callback=null;if(a.hasOwnProperty("oauthData")&&(this.oauthData=a.oauthData,this.oauthData==""))this.oauthData=null;b.successCB()}}else if(a.status===0){if(o(a.callbackId))b=this.callback,this.callback=null,b.errorCB({code:a.errorCode,message:a.errorMessage})}else if(a.status===2)clearTimeout(this.timer),this.oauthData=a.oauthData,a=this.responseHandler,
this.responseHandler=null,a(this.oauthData);else if(a.status===3)clearTimeout(this.timer),a=this.responseHandler,this.responseHandler=null,a({timeout:"Server timed out!"})}else d.instance.warn("OAuthRedirectService._update called without update data")};H.prototype.initAuthData=function(a,b,c){if(!j(c))throw Error("Invalid error handler!");!o(a)||typeof a!=="object"?c({code:p.INVALID_ARGUMENTS,message:"The authSettings is invalid."}):!o(a.authURL)||typeof a.authURL!=="string"||a.authURL==""?c({code:p.INVALID_ARGUMENTS,
message:"The authURL is invalid."}):!o(a.clientId)||typeof a.clientId!=="string"||a.clientId==""?c({code:p.INVALID_ARGUMENTS,message:"The clientId is invalid."}):!o(a.redirectURI)||typeof a.redirectURI!=="string"||a.redirectURI==""?c({code:p.INVALID_ARGUMENTS,message:"The redirectURI is invalid."}):j(b)?o(this.callback)||o(this.responseHandler)?c({code:p.OPERATION_IN_PROGRESS,message:"An operation is already in progress."}):(this.clientId=a.clientId,this.redirectURI=a.redirectURI,this.oauthData=null,
this.callback={successCB:b,errorCB:c},f.instance._send({action:"call",path:"oauthRedirectService",data:{method:"init",callbackId:this.callbackId,authURL:a.authURL,clientId:a.clientId,redirectURI:a.redirectURI}}),this.callbackId++):c({code:p.INVALID_ARGUMENTS,message:"The success callback is invalid."})};H.prototype.startListening=function(a,b,c){if(!j(c))throw Error("Invalid error handler!");j(b)?j(a)?!o(this.clientId)||typeof this.clientId!=="string"||this.clientId==""?c({code:p.INVALID_AUTH_SESSION,
message:"The authorization session is invalid. initAuthData() must be called first."}):o(this.callback)||o(this.responseHandler)?c({code:p.OPERATION_IN_PROGRESS,message:"An operation is already in progress."}):(this.callback={successCB:b,errorCB:c},this.responseHandler=a,this.timer=setTimeout(function(){this.responseHandler=null},this.timeout),f.instance._send({action:"call",path:"oauthRedirectService",data:{method:"startListening",clientId:this.clientId,callbackId:this.callbackId,timeout:this.timeout}}),
this.callbackId++):c({code:p.INVALID_ARGUMENTS,message:"The response callback is invalid."}):c({code:p.INVALID_ARGUMENTS,message:"The success callback is invalid."})};H.prototype.stopListening=function(a,b){if(!j(b))throw Error("Invalid error handler!");j(a)?!o(this.clientId)||typeof this.clientId!=="string"||this.clientId==""?b({code:p.INVALID_AUTH_SESSION,message:"The authorization session is invalid. initAuthData() must be called first."}):o(this.callback)?b({code:p.OPERATION_IN_PROGRESS,message:"An operation is already in progress."}):
(clearTimeout(this.timer),this.responseHandler=null,this.callback={successCB:a,errorCB:b},f.instance._send({action:"call",path:"oauthRedirectService",data:{method:"stopListening",clientId:this.clientId,callbackId:this.callbackId}}),this.callbackId++):b({code:p.INVALID_ARGUMENTS,message:"The success callback is invalid."})};H.prototype.updateAuthData=function(a,b,c){if(!j(c))throw Error("Invalid error handler!");j(b)?!o(a)||typeof a!=="object"?c({code:p.INVALID_ARGUMENTS,message:"The authData is invalid."}):
!o(this.clientId)||typeof this.clientId!=="string"||this.clientId==""?c({code:p.INVALID_AUTH_SESSION,message:"The authorization session is invalid. initAuthData() must be called first."}):o(this.callback)||o(this.responseHandler)?c({code:p.OPERATION_IN_PROGRESS,message:"An operation is already in progress."}):(this.callback={successCB:b,errorCB:c},f.instance._send({action:"call",path:"oauthRedirectService",data:{method:"update",clientId:this.clientId,callbackId:this.callbackId,data:a}}),this.callbackId++):
c({code:p.INVALID_ARGUMENTS,message:"The success callback is invalid."})};H.prototype.resetAuthData=function(a,b){if(!j(b))throw Error("Invalid error handler!");j(a)?!o(this.clientId)||typeof this.clientId!=="string"||this.clientId==""?b({code:p.INVALID_AUTH_SESSION,message:"The authorization session is invalid. initAuthData() must be called first."}):o(this.callback)||o(this.responseHandler)?b({code:p.OPERATION_IN_PROGRESS,message:"An operation is already in progress."}):(this.callback={successCB:a,
errorCB:b},f.instance._send({action:"call",path:"oauthRedirectService",data:{method:"reset",clientId:this.clientId,callbackId:this.callbackId}}),this.callbackId++):b({code:p.INVALID_ARGUMENTS,message:"The success callback is invalid."})};H.instance=new H;var Ja="['\"\\\\\n\r\t\u0008\u000c\u000b]+",q={STORAGE_OUT_OF_SPACE:1,STORAGE_IO_ERROR:2,STORAGE_DECRYPTION_ERROR:3,STORAGE_INVALID_ARGUMENT:11,STORAGE_NOT_OPEN:12,STORAGE_NOT_CLOSED:13,STORAGE_INVALID_PASSWORD:14,STORAGE_PASSWORD_NOT_AVAILABLE:15,
STORAGE_VALUE_SIZE_EXCEEDED:16,STORAGE_INVALID_KEY:17,STORAGE_NO_SECURE_PASSWORD_STORE:18};n.extend(u);u.prototype._initialize=function(a){a.hasOwnProperty("update")?(a=a.update,a.hasOwnProperty("updatedState")&&Aa(this,a.updatedState)):d.instance.warn("EncryptedStorageService._initialize called without update")};u.prototype._update=function(a){if(a.hasOwnProperty("update")){a=a.update;a.hasOwnProperty("updatedState")&&Aa(this,a.updatedState);if(a.callbackId!=-1){var b=this.callbacks[a.callbackId];
delete this.callbacks[a.callbackId];if(a.status===1)switch(b.type){case "setItem":G(b.successCB,a.itemKey);this.stateChangedSignal.dispatch();break;case "removeItem":G(b.successCB,a.itemKey);this.stateChangedSignal.dispatch();break;case "clear":G(b.successCB);this.stateChangedSignal.dispatch();break;case "getItem":G(b.successCB,a.itemValue);break;case "getKeys":G(b.successCB,a.keys.length>0?a.keys:null);break;default:G(b.successCB)}else G(b.errorCB,{code:a.errorCode,message:a.errorMessage})}a.hasOwnProperty("updatedState")&&
this.stateChangedSignal.dispatch()}else d.instance.warn("EncryptedStorageService._update called without update data")};u.prototype.setSessionOptions=function(a,b,c){z(c,"Undefined error callback function");j(b)?w(a)?a.hasOwnProperty("retainPassword")?a.hasOwnProperty("closeOnBackgrounding")?(this.retainPassword=a.retainPassword?a.retainPassword=!0:a.retainPassword=!1,this.closeOnBackgrounding=a.closeOnBackgrounding?a.closeOnBackgrounding=!0:a.closeOnBackgrounding=!1,this.callbacks[this.callbackId]=
{type:"setSessionOptions",successCB:b,errorCB:c},f.instance._send({action:"call",path:"encryptedStorageService",data:{method:"setSessionOptions",options:a,callbackId:this.callbackId}}),this.callbackId++):(a={code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid options argument: closeOnBackgrounding property missing"},c(a)):(a={code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid options argument: retainPassword property missing"},c(a)):(a={code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid options argument"},
c(a)):(a={code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid success callback function"},c(a))};u.prototype.open=function(a,b,c){z(c,"Undefined error callback function");if(j(b)){if(!w(a)||typeof a=="string"&&a.length==0)a="";else if(!za(a)){a={code:q.STORAGE_INVALID_PASSWORD,message:"Specified password must be less than 65 valid characters."};c(a);return}this.callbacks[this.callbackId]={type:"open",successCB:b,errorCB:c};f.instance._send({action:"call",path:"encryptedStorageService",data:{method:"open",
password:a,callbackId:this.callbackId}});this.callbackId++}else a={code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid success callback function"},c(a)};u.prototype.changePassword=function(a,b,c){z(c,"Undefined error callback function");j(b)?za(a)?(this.callbacks[this.callbackId]={type:"changePassword",successCB:b,errorCB:c},f.instance._send({action:"call",path:"encryptedStorageService",data:{method:"changePassword",password:a,callbackId:this.callbackId}}),this.callbackId++):(a={code:q.STORAGE_INVALID_PASSWORD,
message:"A non-empty password of up to 64 valid characters must be provided."},c(a)):(a={code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid success callback function"},c(a))};u.prototype.close=function(a,b){z(b,"Undefined error callback function");j(a)?(this.callbacks[this.callbackId]={type:"close",successCB:a,errorCB:b},f.instance._send({action:"call",path:"encryptedStorageService",data:{method:"close",callbackId:this.callbackId}}),this.callbackId++):b({code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid success callback function"})};
u.prototype.resetService=function(a,b){z(b,"Undefined error callback function");j(a)?(this.callbacks[this.callbackId]={type:"resetService",successCB:a,errorCB:b},f.instance._send({action:"call",path:"encryptedStorageService",data:{method:"resetService",callbackId:this.callbackId}}),this.callbackId++):b({code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid success callback function"})};u.prototype.setItem=function(a,b,c,d){z(d,"Undefined error callback function");if(j(c))if(ta(a))if(b===void 0)a={code:q.STORAGE_INVALID_ARGUMENT,
message:"The value must not be undefined."},d(a);else{var g=JSON.stringify(b);g.length>16777218?(a={code:q.STORAGE_VALUE_SIZE_EXCEEDED,message:"Value parameter size as JSON ("+g.length+" characters) exceeds limit."},d(a)):(this.callbacks[this.callbackId]={type:"setItem",successCB:c,errorCB:d},f.instance._send({action:"call",path:"encryptedStorageService",data:{method:"setItem",keyArg:a,valueArg:b,callbackId:this.callbackId}}),this.callbackId++)}else a={code:q.STORAGE_INVALID_KEY,message:"The key must be less than 65 characters in length and contain valid characters."},
d(a);else a={code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid success callback function"},d(a)};u.prototype.getItem=function(a,b,c){z(c,"Undefined error callback function");j(b)?ta(a)?(this.callbacks[this.callbackId]={type:"getItem",successCB:b,errorCB:c},f.instance._send({action:"call",path:"encryptedStorageService",data:{method:"getItem",keyArg:a,callbackId:this.callbackId}}),this.callbackId++):(a={code:q.STORAGE_INVALID_KEY,message:"The key must be less than 65 characters in length and contain valid characters."},
c(a)):(a={code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid success callback function"},c(a))};u.prototype.removeItem=function(a,b,c){z(c,"Undefined error callback function");j(b)?ta(a)?(this.callbacks[this.callbackId]={type:"removeItem",successCB:b,errorCB:c},f.instance._send({action:"call",path:"encryptedStorageService",data:{method:"removeItem",keyArg:a,callbackId:this.callbackId}}),this.callbackId++):(a={code:q.STORAGE_INVALID_KEY,message:"The key must be less than 65 characters in length and contain valid characters."},
c(a)):(a={code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid success callback function"},c(a))};u.prototype.getKeys=function(a,b){z(b,"Undefined error callback function");j(a)?(this.callbacks[this.callbackId]={type:"getKeys",successCB:a,errorCB:b},f.instance._send({action:"call",path:"encryptedStorageService",data:{method:"getKeys",callbackId:this.callbackId}}),this.callbackId++):b({code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid success callback function"})};u.prototype.clear=function(a,b){z(b,"Undefined error callback function");
j(a)?(this.callbacks[this.callbackId]={type:"clear",successCB:a,errorCB:b},f.instance._send({action:"call",path:"encryptedStorageService",data:{method:"clear",callbackId:this.callbackId}}),this.callbackId++):b({code:q.STORAGE_INVALID_ARGUMENT,message:"Invalid success callback function"})};u.instance=new u;n.extend(f);f.prototype._generateUID=function(){return Math.floor(Math.random()*1E4).toString()+(new Date).getTime().toString()};f.prototype._initialize=function(a){var b,c,e;try{d.instance.debug("Interface._initialize called");
(!a.hasOwnProperty("length")||a.length<=0)&&d.instance.warn("Interface._initialize called with no data");for(b=0;b<a.length;b++)if(c=a[b],c.hasOwnProperty("path"))switch(e=this._getNextPathElement(c.path),c.path=this._getChildPath(c.path),e){case "libraryService":d.instance.debug("Initializing libraryService...");x.instance._initialize(c);break;case "transactionManager":d.instance.debug("Initializing transactionManager...");h.instance._initialize(c);break;case "authenticationService":d.instance.debug("Initializing authenticationService...");
J.instance._initialize(c);break;case "configurationService":d.instance.debug("Initializing configurationService...");K.instance._initialize(c);break;case "deviceService":d.instance.debug("Initializing deviceService...");O.instance._initialize(c);break;case "receiptService":d.instance.debug("Initializing receiptService...");t.instance._initialize(c);break;case "settingsService":d.instance.debug("Initializing settingsService...");P.instance._initialize(c);break;case "analyticsService":d.instance.debug("Initializing analyticsService...");
r.instance._initialize(c);break;case "dialogService":d.instance.debug("Initializing dialogService...");y.instance._initialize(c);break;case "geolocationService":d.instance.debug("Initializing geolocationService...");this.geolocation=L.instance;L.instance._initialize(c);break;case "calendarService":d.instance.debug("Initializing calendarService...");v.instance._initialize(c);break;case "oauthRedirectService":d.instance.debug("Initializing oauthRedirectService...");this.oauthRedirectService=H.instance;
H.instance._initialize(c);break;case "folioActivityService":d.instance.debug("Initializing folioActivityService...");this.folioActivityService=F.instance;F.instance._initialize(c);break;case "encryptedStorageService":d.instance.debug("Initializing encryptedStorageService...");this.encryptedStorageService=u.instance;u.instance._initialize(c);break;default:d.instance.warn("Interface._initialize called with an unknown destination: "+e)}else d.instance.warn("Interface._initialize received update without path: "+
JSON.stringify(c));d.instance.profile("InitializationTime");this.initializationComplete.dispatch();d.instance.info("Initialization complete")}catch(f){d.instance.error(f)}};f.prototype._update=function(a){var b,c,e;try{for(b=0;b<a.length;b++)if(c=a[b],c.hasOwnProperty("path"))switch(e=this._getNextPathElement(c.path),c.path=this._getChildPath(c.path),e){case "libraryService":x.instance._update(c);break;case "transactionManager":h.instance._update(c);break;case "authenticationService":J.instance._update(c);
break;case "configurationService":K.instance._update(c);break;case "deviceService":O.instance._update(c);break;case "receiptService":t.instance._update(c);break;case "settingsService":P.instance._update(c);break;case "analyticsService":r.instance._update(c);break;case "dialogService":y.instance._update(c);break;case "geolocationService":L.instance._update(c);break;case "calendarService":v.instance._update(c);break;case "oauthRedirectService":H.instance._update(c);break;case "folioActivityService":F.instance._update(c);
break;case "encryptedStorageService":u.instance._update(c);break;default:d.instance.warn("Interface._update called with an unknown destination: "+e)}else d.instance.warn("Interface._update received update without path: "+JSON.stringify(c))}catch(f){d.instance.error(f)}};f.prototype._send=function(a){try{this._bridge.out({event:{type:"LibraryAPIActions",actions:[a]}})}catch(b){d.instance.error(b)}};f.instance=new f;return f.instance}();